<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style>
div#header{
    background-color : #A9BCF5;
    position : fixed;
    width : 100%;
    top : 0;
    left : 0;
    height : 10rem;
	text-align: center;
	
}

div#search-box{
	display : inline-block;
	text-align: center;
	background-color: rgba(255,255,255,0);
	border: 2px solid white;
	border-radius: 20px;
	width : 40%;
	margin-top : 30px;
	background-color: white;
	
}

input#search{
	width: 80%;
	height: 50px;
	border-radius: 20px;
	border: 0px;
	vertical-align: middle;
}

button#search-icon{
	
	vertical-align: middle;
	width : 30px;
	height : 30px;
	border: 0px;
	background-color: rgba(255,255,255,0);
	
}

input#start_date, input#end_date{
	border-radius: 20px;
	border: 1px solid white;
}

div#contents{ 
	margin-top : 10px;
	position: fixed;
	top: 10rem; 
	left: 0; 
	right: 0; 
	bottom: 0; 
	overflow: auto; 
}

div#root-recommend{
	width : 100%;
	margin-top : 10px;
	border: 2px solid #A9BCF5;
}

div#weather{
	width : 100%;
	margin-top : 10px;
	border: 2px solid #A9BCF5;
}

div#tour-recommend{
	width : 100%;
	margin-top : 10px;
	border: 2px solid #A9BCF5;
}

div#restaurant-recommend{
	width : 100%;
	margin-top : 10px;
	border: 2px solid #A9BCF5;
}

.card {
	display : inline-block;
	background: #fff;
	border-radius: 2px;
	display: inline-block;
	height: 100px;
	margin: 1rem;
	position: relative;
	width: 100px;
	text-align: center;
}

.card-3 {
  box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
}
</style>
</head>
<body>
<script type="text/javascript" src="https://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$("#search-icon").on("click", function(){
		//alert('a');
		$("#a").empty();
		$("#b").empty();
		$("#c").empty();
		$("#d").empty();
		$("#e").empty();
		
		if($("#search").val() === ''){
			alert('입력자료 채울것');
		}
		
		var param = $("form[name=frm]").serialize();
		
		$.ajax({
			url : 'search',
			type : 'post',
			data : $("#frm").serialize(),
			dataType : 'json',
			success:function(data){
				//alert(data);
				console.log(data);
				
				
				try{ //if (data[0].루트2 != null)
					var r1 = '';
					var r2 = '';
					var r3 = '';
					var r4 = '';
					var r5 = '';
					for(var i = 0; i < data[0].루트1.장소.length; i++){
						r1 += "<a href='detail'>" + data[0].루트1.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트1.주소[i] + "<br>";
						r2 += "<a href='detail'>" + data[0].루트2.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트2.주소[i] + "<br>";
						r3 += "<a href='detail'>" + data[0].루트3.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트3.주소[i] + "<br>";
						r4 += "<a href='detail'>" + data[0].루트4.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트4.주소[i] + "<br>";
						r5 += "<a href='detail'>" + data[0].루트5.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트5.주소[i] + "<br>";						
						}
					$("#a").append('a코스<br>');
					$("#b").append('b코스<br>');
					$("#c").append('c코스<br>');
					$("#d").append("d코스<br>");
					$("#e").append("e코스<br>");
					
					$("#a").append(r1);
					$("#b").append(r2);
					$("#c").append(r3);
					$("#d").append(r4);
					$("#e").append(r5);
					
				}catch{ //else if(data[0].루트2 === "undefined"){
					
					if (data.length != 0){
						var r1 = '';
						var r2 = '';
						var r3 = '';
						var r4 = '';
						var r5 = '';
						for(var i = 0; i < data[0].루트1.장소.length; i++){
							r1 += "<a href='detail'>" + data[0].루트1.장소[i] + "</a>" + "&nbsp;&nbsp;" + data[0].루트1.주소[i] + "<br>";
						}
						$("#a").append('a코스<br>');
						$("#a").append(r1);												
					}else{
						$("#a").append("여행추천지가 없습니다.");
					}
				
				}
				//else{
					//r1 += "<a href='detail'>" + data[0].루트1.장소[0] + "</a>" + "&nbsp;&nbsp;" + data[0].루트1.주소[0] + "<br>";
				//	r1 += "<a href='detail'>" + data[0].루트1.장소[1] + "</a>" + "&nbsp;&nbsp;" + data[0].루트1.주소[1] + "<br>";
					//$("#a").append('추천 코스는 없습니다.');
				//	$("#a").append(r1);
				//}
			},
			error:function(){
				$("#error").html('<h2>에러</h2>');
			}
				
		});
	});
});
</script>

<div id="header">
<div class='showData'>
</div>
	<form action="search" method="post" id='frm'>{% csrf_token %}
	<div id='search-box'>
		<input type="text" id='search' name='search' placeholder="검색어를 입력하세요.">
		<button type="button" id='search-icon'>
			<img src="./static/image/search.png" style="width: 30px; height: 30px;">
		</button>
	</div>
	
	<br><br>
	<input type='date' id='start_date' name='start_date'/>
	~
	<input type='date' id='end_date' name='end_date'/>
	<br><br>
	
	</form>
</div>


<div id='contents'>

	<!-- 검색 -->
	
	<div id='root-recommend'>
		<!--  <h3>travel</h3>-->
	<h3>루트추천</h3>
	{% if error %}
	<div id='error'>
		{{error}}
	</div>
	{% else %}
	<div id="a"></div>
	<br>
	<div id="b"></div>
	<br>
	<div id="c"></div>
	<br>
	<div id="d"></div>
	<br>
	<div id="e"></div>
	{% endif %}
	
	
	
	<!-- 루트추천  
	{% if root %}
	{% for r in root %}
	--> 
		<div class="card card-3">
			<a href="detail">r</a>
		</div>
		
	<!-- 루트추천 끝 
	{% endfor %}
	{% endif %}
    -->					
	</div>
	
	<!-- 날씨 -->
	{% if start != None and end != None %}
	<div id='weather'>
	<span>{{start}} ~ {{end}}</span>
	<br>
	<span> 날씨는? </span>
	</div>
	
	{% else %}
	<div id='weather'>
	<h4>날짜를 선택하시면 날씨를 볼 수 있습니다.</h4>
	</div>
	{% endif %}

	<!-- 여행지 -->
	{% if tour %}
	<div id='tour-recommend'>
	<h3>여행지 추천</h3>
	{% for t in tour %}
		<div class="card card-3">
		<a href="detail">{{t}}</a>
		</div>
	{% endfor %}		
	</div>
	{% endif %}
	
	{% if restaurant %}
	<div id='restaurant-recommend'>
	<h3>음식점 추천</h3>
	{% for r in restaurant %}
		<div class="card card-3">
		<a href="detail">{{r}}</a>
		</div>
	{% endfor %}		
	</div>
	{% endif %}	
</div>

</body>
</html>